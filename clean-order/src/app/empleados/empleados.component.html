<div class="entity-container">
  <div class="header">
    <h2>Lista de Empleados</h2>
    <button class="btn-primary" (click)="crearEmpleado()">
      Nuevo Empleado
    </button>
  </div>

  <table class="entity-table">
    <thead>
      <tr>
        <th>RUT</th>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Dirección</th>
        <th>Teléfono</th>
        <th>Comuna</th>
        <th>Usuario</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      @for (empleado of empleados; track $index) {
        <tr>
          <td>{{ empleado.rut}}-{{empleado.dv}}</td>
          <td>{{ empleado.nombre }}</td>
          <td>{{ empleado.apellido }}</td>
          <td>{{ empleado.direccion }}</td>
          <td>{{ empleado.telefono }}</td>
          <td>{{ empleado.idComuna }}</td>
          <td>
            <span [class]="empleado.activo === 'S' ? 'status-active' : 'status-inactive'">
              {{ empleado.activo === 'S' ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td>
            <button class="btn-edit" (click)="editarEmpleado(empleado)">
              Editar
            </button>
          </td>
        </tr>
      }
    </tbody>
  </table>
  
  @if(empleados.length === 0 && !loading) {
    <div class="no-data">
      No hay empleados registrados
    </div>
  }

  @if(loading) {
    <div class="loading">
      Cargando empleados...
    </div>
  }

  @if(error) {
    <div class="error">
      {{ error }}
    </div>
  }

  <!-- Formulario Crear -->
  @if(showCreateForm) {
    <app-empleado-form
      (formSubmit)="onCreateSubmit($event)"
      (formCancel)="onCancelForm()">
    </app-empleado-form>
  }

  <!-- Formulario Editar -->
  @if(showEditForm && selectedEmpleado) {
    <app-empleado-form
      [empleado]="selectedEmpleado"
      (formSubmit)="onEditSubmit($event)"
      (formCancel)="onCancelForm()">
    </app-empleado-form>
  }
</div>
<div class="form-container">
  <div class="form-header">
    <h2>{{ isEditMode ? "Editar" : "Crear" }} Vehículo</h2>
  </div>
  <form class="form-body" #vehiculoForm="ngForm" (ngSubmit)="crearVehiculo()">
    <!-- Patente y Capacidad en la misma fila -->
    <div class="form-columns">
      <div class="form-group">
        <label for="patente">Patente:</label>
        <input
          id="patente"
          name="patente"
          class="form-control"
          [readOnly]="isEditMode"
          [(ngModel)]="nuevoVehiculo.patente"
          (ngModelChange)="onPatenteChange($event)"
          required
          minlength="4"
          maxlength="8"
          #patenteCtrl="ngModel"
          style="text-transform:uppercase;"
        />
        @if(patenteCtrl.invalid && (patenteCtrl.dirty || patenteCtrl.touched)) {
        <div class="error">
          @if (patenteCtrl.errors?.['required']) {
          <small>La patente es obligatoria.</small>
          } @if (patenteCtrl.errors?.['minlength']) {
          <small>Debe tener al menos 4 caracteres.</small>
          } @if (patenteCtrl.errors?.['maxlength']) {
          <small>Debe tener máximo 8 caracteres.</small>
          }
        </div>
        }
      </div>

      <div class="form-group">
        <label for="capacidad">Capacidad Litros:</label>
        <input
          id="capacidad"
          name="capacidad"
          class="form-control"
          type="number"
          min="1"
          [(ngModel)]="nuevoVehiculo.capacidad"
          required
          #capacidadCtrl="ngModel"
        />
        @if(capacidadCtrl.invalid && (capacidadCtrl.dirty || capacidadCtrl.touched)) {
        <div class="error">
          @if (capacidadCtrl.errors?.['required']) {
          <small>La capacidad es obligatoria.</small>
          } @if (capacidadCtrl.errors?.['min']) {
          <small>Debe ser mayor a 0.</small>
          }
        </div>
        }
      </div>
    </div>

    <!-- resto del formulario -->
    <div class="form-columns">
      <div class="form-group">
        <label for="tipoCarga">Tipo de carga:</label>
        <select
          id="tipoCarga"
          name="tipoCarga"
          class="form-control"
          [(ngModel)]="selectedTipoCargaId"
          required
          #tipoCargaCtrl="ngModel"
        >
          <option [ngValue]="null" disabled>Seleccione...</option>
          @for(t of tiposCarga; track t.id) {
          <option [ngValue]="t.id">{{ t.nombreCarga }}</option>
          }
        </select>
        @if (tipoCargaCtrl.invalid && (tipoCargaCtrl.dirty || tipoCargaCtrl.touched)) {
        <div class="error">
          <small>Debe seleccionar un tipo de carga.</small>
        </div>
        }
      </div>

      <div class="form-group">
        <label for="activo">Activo:</label>
        <input
          id="activo"
          name="activo"
          class="form-control"
          type="checkbox"
          [(ngModel)]="activoChecked"
        />
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="cancelar()">
        Cancelar
      </button>
      <button class="btn btn-primary" type="submit" [disabled]="vehiculoForm.invalid">
        {{ isEditMode ? "Guardar" : "Crear Vehículo" }}
      </button>
    </div>
  </form>
</div>
